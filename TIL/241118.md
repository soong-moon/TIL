# 241118 27일차 TIL


type hint 
python은 원래 type 표시를 강제 하지않음

and =& or = |

pydantic = 데이터를 검사하고 구조화 할수 있게 도와주는 라이브러리 

from pydantic import BaseModel

class student(basemodel):
    name : str
    age : int
    grade : flort

동작 가능

JSON = python에서 일반적인 딕셔너리 형태를 가진다. 키와 밸류로 이루어짐


> ###### LLM이란?

대규모 텍스트 데이터를 학습하여 자연어를 이해하고 생성할수 있는 AI모델이다.
기본적으로 자연어 처리 (NLP)의 다양한 작업, 예를 들면 번역,질문 응답 , 텍스트 생성등을 할수 있다.

> ###### LLM 동작 원리

1. 학습
    LLM은 대규모 텍스트 데이터셋을 이용해 학습한다.
    여기서 중요한 개념은 "패턴 인식"이다. 수많은 텍스트에서 단어와 문장의 패턴을 찾아 내어, 
    새로운 문장이나 답변을 생성할 때 그 팬턴을 적용한다.

2. 추론
    학습된 LLM은 질문이나 입력을 받으면 , 그에 맞는 추론을 통해 답변을 생성한다.
    이때 , 이전의 맥락을 기억하고 활용하면서 답을 만들어 낸다.

3. 미세조정
    LLM은 특정 도메인이나 용도에 맞춰 추가 학습(Fine-tuning) 할수 있다.
    예를 들면 , 의료나 법률과 같은 특수한 분야에 맞는 데이터를 추가로 학습시키면 해당 분야에 대한
    답변의 정확성이 높아진다.

> ###### LLM의 랜덤성과 조건성

1. 랜덤성 
    LLM은 기본적으로 확률에 기반하여 문장을 생성한다.
    같은 질문을 하더라도 매번 동일한 답변을 주지 않을 수 있다.
    이 랜덤성은 모델이 새로운 문장을 만들어내는 능력을 키워주는 핵심 요소이다.
    LLM이 결과를 생성 할 때 , 토큰의 확률 분포를 계산하여 그중에서 높은 확률을 가진 토큰을 선택해 문장을 만든다.
    이때 "온도(temperature)" 라는 매개변수가 랜덤성에 영향을 미치는데 ,
     * 온도 값이 낮으면 :  모델은 더 일관되고 예측 가능한 답변을 생성한다(더 적은 랜덤성)
     * 온도 값이 높으면 :  답변이 창의적이고 예측하기 어려운 결과가 나올수 있다(더 많은 랜덤성)
```
질문 : 오늘 날씨는 어때?
온도 낮음 : 오늘 날씨는 맑습니다.
온도 높음 : 오늘은 하늘이 쾌청하고 , 약간의 바람이 불어요
```

2. 조건성
LLM은 조건부 확률을 기반으로 결과를 만들어 낸다.
즉, 모델은 이전의 입력내용에 따라 무장을 조건부로 생성하게 되는데, 이를 컨텍스트라고도 한다.
이 과정에서 중요한 두가지 요소는 다음과 같다.
* 프롬프트 :입력된 문장이나 질문이 무엇인지에 따라 결과가 달라진다.
* 맥락 기억 : LLM은 대화를 나누는 동안 이전문장이나 대화 흐름을 기억하고 그에 맞춰 답변을 생성한다.

```
프롬프트에 따른 차이 : 고양이에 대해 말해줘 -> 고양이는 애완동물로서 인기가 많습니다.
                    고양이의 장점에 대해 말해줘 -> 고양이는 혼자서도 잘지내는 동물이어서 바쁜 사람들에게 적합합니다.
```

> ##### LLM의 원리를 알아야하는이유
* LLM을 단순히 사용하기만 해도 좋지만 , 그 동작 원리를 이해하면 더 효율적으로 사용 할수 있다.
* 정확한 프롬프트를 작성할수 있게 되어 , 원하는 답변을 더 쉽게 얻을수 있다.
* LLM의 한계를 알면 , 적절한 상황에서 더 나은 도구를 선택할수 있다.
* 성능 개선을 위한 기술 요소들을 효과적으로 도입할수 있다.

> ###### LLM 원리 요약
1. 대규모 데이터 학습
2. 문맥 기반 추론
3. 랜덤성 및 조건성
4. 미세 조정


> #### LLM의 역할 및 중요성

**LLM의 주요 기능**
* 자연어 이해 : 질문이나 명령을 이해하고 적절히 응답하는 능력.
* 텍스트 생성 : 기존 데이터를 바탕으로 자연스러운 텍스트를 생성.
* 번역 및 요약 : 다른 언어로 번역하거나 긴 텍스트를 요약.
* 질문 응답 시스템 : 사용자의 질문에 정확하게 답변하는 기능

이처럼 LLM은 대규모 데이터를 기반으로 한 학습을 통해 사람처럼 자연스러운 언어 처리를 가능하게 하고,
대화형 AI ,챗봇, 검색 시스템 등 다양한 곳에 응용된다. 하지만 모든 답변을 자체적으로 생성하는데 한계가 있기 때문에,
이를 보완하는 기법들이 필요한데 , 그 대표적인 기법중 하나가 바로 `RAG`이다


> ##### RAG
RAG는 검색 기반 생성 기법이다.
LLM은 많은 데이터를 학습했음에도 , 최신 정보나 특정 도메인 지식에 대한 한계를 가질수 있다.
이를 보완하기 위해 RAG는 LLM이 직접 답을 생성하는 대신 , 외부 데이터 베이스나 문서에서 관련정보를 검색한후 ,
그 정보를 바탕으로 답변을 생성하는 방식이다.

> ###### RAG의 동작 원리

1. 질문 입력 - 사용자가 질문을하면 , RAG시스템은 질문에 맞는 답변을 생성하기 전에 검색단계를 거친다.

2. 문서 검색 - 벡터DB나 기타 정보 저장소에서 질문과 관련된 문서를 검색한다. 이때 사용되는 검색 방법은 텍스트를 벡터화하여 의미적으로 유사한 문서를 찾는것이다.

3. 답변 생성 - 검색된 문서를 바탕으로 LLM이 최종적으로 답변을 생성한다.

> ###### RAG의 장점

1. 최신 정보 활용
    LLM은 학습된 데이터가 오래될수 있지만, RAG는 최신 데이터베이스에서 정보를 검색할수 있다.

2. 특정 도메인 정보 제공
    도메인에 특화된 정보 제공이 가능하여 , 일반적인 LLM보다 더 정확한 정보를 제공 할수 있다.

3. 효율성
    필요한 정보만을 검색해오기 때문에 , LLM의 모든 지식을 외부에 의존하지 않고도 효율적으로 사용이 가능하다.


> ##### Vector DB
텍스트, 이미지등의 데이터를 벡터형태로 변환해 저장하고 , 그 벡터를 기반으로 데이터를 빠르고 효율적으로 검색하는 데이터베이스이다.
벡터 DB는 임베딩(embedding)이라는 방법으로 데이터를 벡터화하여, 유사한 의미를 가진 데이터들을 빠르게 검색할 수 있게 해준다.

**임베딩**
임베딩(embedding)은 텍스트나 이미지를 수학적으로 벡터(숫자 배열)로 변환하는 과정이다. 예를 들어, "강아지"라는 단어를 벡터로 변환하면 그 벡터는 "고양이"와 같은 다른 동물과도 유사한 벡터값을 가질 수 있다. 벡터 DB는 이러한 임베딩된 데이터를 기반으로 문서 검색을 수행한다.

> ###### Vector DB의 동작 과정
1. 임베딩 생성 -문서나 텍스트를 벡터로 변환한다. 이 벡터는 해당 텍스트의 의미적 정보를 담고 있다.
2. 벡터 저장 - 생성된 벡터를 데이터베이스에 저장한다.
3. 벡터 검색 - 사용자가 검색어를 입력하면, 해당 검색어를 벡터로 변환한 후, 데이터베이스에서 유사한 벡터를 찾아낸다.
4. 결과 제공 - 유사한 벡터를 가진 문서나 데이터를 검색 결과로 제공한다.

> ###### Vector DB의 장점
1. 의미 기반 검색 - 단순 키워드 매칭이 아니라, 텍스트의 의미에 기반한 검색이 가능하여, 유사한 의미를 가진 텍스트도 검색할 수 있다.
2. 고성능 처리 - 대량의 벡터 데이터를 매우 빠르게 처리할 수 있어서, 대규모 텍스트 데이터에 대해 효율적으로 검색이 가능하다.

> ##### 프롬프트 엔지니어링
프롬프트 엔지니어링은 인공지능 모델, 특히 대형 언어 모델(LLM)에 적절한 입력(프롬프트)을 설계하고 작성하여, 모델이 최적의 응답을 하도록 유도하는 기술이다.
GPT 모델과 같은 LLM은 입력된 프롬프트에 따라 답변을 생성하므로, 프롬프트가 잘 설계되면 정확하고 유용한 결과를 얻을 수 있고, 반대로 잘못된 프롬프트는 부정확한 답변이나 혼란스러운 결과를 초래할 수 있다.

**프롬프트 엔지니어링의 목표**
프롬프트 엔지니어링의 주요 목표는 모델이 의도한 대로 응답하도록 유도하는 것이다.
이 과정에서 프롬프트의 구조나 어조를 조정해, 답변의 품질과 일관성을 높이는 것이 중요하다.
예를 들어, 특정 정보만을 요구하거나, 특정한 방식으로 설명해달라고 할 때는 명확하고 구체적인 프롬프트가 필요하다.

>##### 프롬프트 엔지니어링이 동작하는이유
LLM은 기본적으로 패턴 인식과 확률 계산에 기반하여 학습된다.
즉 학습 데이터내에서 어떤 단어가 어떤 맥락에서 자주 등장하는지를 학습하고, 주어진 프롬프트에 맞는 답변을 확률적으로 생성한다.
프롬프트 엔지니어링은 이 모델의 패턴 학습 메커니즘을 활용하여 모델이 적절한 경로로 답을 유도하도록 하는 방법이다.

**LLM의 동작 원리 간단 설명**
1. 프롬프트 입력
사용자가 모델에 질문이나 요청을 입력한다.
2. 맥락 파악
LLM은 입력된 프롬프트를 기반으로 맥락을 분석하고, 그에 맞는 적절한 답변을 생성한다.
3. 확률 계산
학습된 데이터를 기반으로 각 단어나 문장의 확률 분포를 꼐산해 , 가장 가능성 높은 답변을 선택한다.

> ##### 프롬프트 엔지니어링과 System ,Assistant ,User 역할 적용하기
LLM을 사용할때 특히 대화형 모델의 구조화된 대화 흐름을 만들기 위해서는 System ,Assistant ,User의 세가지 역할을 설정 할수 있다.
이 세가지 역할을 적절히 조정하면 모델이 더 자연스럽고 유의미한 대화를 진행 할수 있다.

1. user(사용자)
* user는 모델과 대화하는 주체로 , 질문이나 요구사항을 제시하는 역할
* 프롬프트 엔지니어링에서 user프롬프트는 명확한 요청을 포함해야 하며, 의도가 분명해야 한다. 
user는 모델이 무엇을 해야하는지 정확하게 전달해야 하므로, 질문 형태의 프롬프트가 많다.

2. Assistant(도우미)
* asiistant는 user의 질문에 답변을 제공하는 역활로 실제로 GPT 모델이 수행하는 부분이다.
* user가 입력한 내용에 따라 적절한 답변을 생성해야 하며, 명확한 어조와 친절한 태도로 응답하는것이 일반적이다.

3. System(시스템)
* system은 대화의 기본 규칙과 assistant의 성격을 결정한다.system의 역할은 대화의 배경과 규칙을 설정해 모델이 답변을
생성할 때 어떤 스타일과 어조를 사용할지 지시할수 있다.
* 모델이 특정한 태도나 전문성을 갖고 응답하도록 프레임워크를 제공한다.
```
1️⃣
일반적인 대화 흐름 설정
System: "Assistant는 친절하고 명확한 설명을 제공합니다."
User: "산업 혁명이 시작된 배경에 대해 알려주세요."
Assistant: "산업 혁명은 18세기 후반 영국에서 시작되었으며, 기술 혁신과 경제적 변화가 그 주요 배경입니다. 특히 기계화와 공장 시스템의 발전이 큰 역할을 했습니다."
​
2️⃣
전문적이고 깊이 있는 답변을 원할 때
System: "Assistant는 역사 전문가로서 깊이 있는 설명을 제공하며, 중요한 역사적 배경도 함께 다룹니다."
User: "영국의 산업 혁명의 주요 원인에 대해 설명해 주세요."
Assistant: "산업 혁명의 주요 원인 중 하나는 영국의 풍부한 천연 자원, 특히 석탄과 철광석의 이용 가능성입니다. 또한, 상업의 발전과 대규모 자본 축적, 정치적 안정성 등이 중요한 역할을 했습니다. 이 외에도 농업 혁명으로 인한 노동력의 증가도 큰 원인이었습니다..."
​
3️⃣
간결한 답변만을 원할 때
System: "Assistant는 간결하고 핵심만을 전달하는 답변을 제공합니다."
User: "산업 혁명의 주요 발명품은 무엇인가요?"
Assistant: "산업 혁명의 주요 발명품으로는 방적기, 증기기관, 코튼 진 등이 있습니다."
```

